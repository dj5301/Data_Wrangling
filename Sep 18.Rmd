---
title: "Sep 18 Data manipulation"
output: github_document
---

```{r}
library(tidyverse)
```

Let's import datasets

```{r}
litters_df=
  read_csv("data_import_examples/FAS_litters.csv", na = c("NA", ".", ""))
litters_df = 
  janitor::clean_names(litters_df)
```

```{r}
Pups_df = 
    read_csv(
        file = "data_import_examples/FAS_pups.csv",
        skip = 3,
        na = c("NA", ".", ""))

Pups_df = 
  janitor::clean_names(Pups_df)
```

## select

'select' select variables from my data frame
select specific variables

```{r}
select(litters_df, group, litter_number, gd0_weight)
```

select range

```{r}
select(litters_df, group:gd_of_birth)
```

select by removal

```{r}
select(litters_df, -group)
select(litters_df, -(group:gd_of_birth))
```

select by prefix
```{r}
select(litters_df, group, starts_with("gd"))
```

rearrange by selecting
```{r}
select(litters_df, starts_with("gd"), group)
select(litters_df, litter_number, everything())

relocate(litters_df, litter_number)
```

rename by selecting

```{r}
select(litters_df, GROUP= group, everything())
rename(litters_df, GROUP= group)
```

what if i only select one variable

```{r}
select(litters_df , group)

pull(litters_df, group)
litters_df$group
```

LA code:

```{r}
select(Pups_df,litter_number, sex, pd_ears)
```


## 'Filter'

use 'filter( )' to filter out rows

```{r}
filter(litters_df, gd_of_birth == 20)
```

look for more than 5 pups alive

```{r}
filter(litters_df, pups_born_alive > 5)
filter(litters_df, pups_born_alive >= 5)
filter(litters_df, pups_born_alive <= 5)
```

look for non-matches

```{r}
filter(litters_df, pups_born_alive !=6)
```

match to a set

```{r}
filter(litters_df, group %in% c("Con7","Con8"))
```

filter out missing rows with 'drop_na()'

```{r}
drop_na(litters_df)
drop_na(litters_df,gd0_weight)
```

Filter to include only pups with sex 1
Filter to include only pups with PD walk less than 11 and sex 2

```{r}
filter(Pups_df, sex ==1)
filter(Pups_df, pd_walk < 11, sex==2)
```

## 'Mutate'

use 'mutate()' to create or modify variables
```{r}
mutate(
  litters_df,
  wt_gain = gd18_weight - gd0_weight,
  group = str_to_lower(group)
)
```

## 'Arrange'

'arrange()' arrange things

```{r}
arrange(litters_df, desc(pups_born_alive))
arrange(litters_df, group, pups_born_alive)

arrange(litters_df, gd0_weight)
```

## PIPES
let's see a bad way to do things
```{r}
litters_df=
  read_csv("data_import_examples/FAS_litters.csv", na = c("NA", ".", ""))

litters_df = 
  janitor::clean_names(litters_df)

litters_df2=
  select(litters_df, group, litter_number, starts_with("gd"))

litters_df3=
  drop_na(litters_df2)

litters_df4=
mutate(
  litters_df3,
  wt_gain = gd18_weight - gd0_weight,
  group = str_to_lower(group)
)
```

```{r}
litters_df = 
  select(janitor::clean_names(read_csv("data_import_examples/FAS_litters.csv", na = c("NA", ".", ""))), group, litter_number, starts_with("gd"))



litters_df=
  drop_na(litters_df)

litters_df=
mutate(
  litters_df,
  wt_gain = gd18_weight - gd0_weight,
  group = str_to_lower(group)
)
```


```{r}
litters_df =
  read_csv("data_import_examples/FAS_litters.csv", na = c("NA", ".", "")) |> 
  janitor::clean_names() |> 
  select(group, litter_number, starts_with("gd")) |> 
  drop_na() |> 
  mutate(
    wt_gain = gd18_weight - gd0_weight 
  )
```

Create a variable that subtracts 7 from PD pivot
Create a variable that is the sum of all the PD variables









